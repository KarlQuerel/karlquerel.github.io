import{r as e,o as a,a as s,c as t,b as o,d as i,e as l,f as n,n as d,t as u,w as r,v as c,g as m,h as v,F as g,i as p,j as h,k as f,l as y,m as b,p as w,u as k,q as _}from"./vendor-U87kivXt.js";const C=(e,a)=>{const s=e.__vccOpts||e;for(const[t,o]of a)s[t]=o;return s},B={key:0,class:"mobile-message"},T=C({__name:"MobileWarning",setup(d){const u=e(!1),r=()=>{u.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768};return a(()=>{r(),window.addEventListener("resize",r)}),s(()=>{window.removeEventListener("resize",r)}),(e,a)=>u.value?(i(),t("div",B,a[0]||(a[0]=[l("div",{class:"mobile-content"},[l("h2",null,"Not available on mobile devices"),l("p",null,[n(" Please use a "),l("span",{class:"highlight"},"desktop computer"),n(" for the best experience ")])],-1)]))):o("",!0)}},[["__scopeId","data-v-04cae067"]]),M={key:0,class:"loading-screen"},x={class:"loading-content"},S={class:"loading-bar-container"},A={class:"loading-text"},P={class:"loading-details"},F=C({__name:"LoadingScreen",props:{isLoading:{type:Boolean,required:!0},loadingProgress:{type:Number,required:!0},loadedAssets:{type:Number,required:!0},totalAssets:{type:Number,required:!0}},setup:e=>(a,s)=>e.isLoading?(i(),t("div",M,[l("div",x,[s[0]||(s[0]=l("h2",{class:"loading-title"},"Loading Assets",-1)),l("div",S,[l("div",{class:"loading-bar",style:d({width:`${e.loadingProgress}%`})},null,4)]),l("div",A,u(e.loadingProgress)+"% Complete",1),l("div",P,u(e.loadedAssets)+" / "+u(e.totalAssets)+" assets loaded",1)])])):o("",!0)},[["__scopeId","data-v-86ad2e86"]]),I={key:0,class:"pre-game-screen"},q={class:"pre-game-content"},G=C({__name:"PreGameScreen",props:{showGame:{type:Boolean,required:!0}},emits:["start-game"],setup:e=>(a,s)=>e.showGame?o("",!0):(i(),t("div",I,[l("div",q,[s[1]||(s[1]=l("h2",{class:"pre-game-title"},[n(" This game is currently"),l("br"),l("span",{class:"highlight"},"in development")],-1)),s[2]||(s[2]=l("h2",{class:"pre-game-title"},[n(" For the best experience"),l("br"),n("turn on your "),l("span",{class:"highlight"},"sound"),n(" before starting ")],-1)),l("button",{class:"pixel-button",onClick:s[0]||(s[0]=e=>a.$emit("start-game"))},"Sound is on!")])]))},[["__scopeId","data-v-d3381f38"]]);function L(){const a=e(null),t=e(null),o=()=>{a.value&&(a.value.pause(),a.value.currentTime=0),t.value&&(t.value.pause(),t.value.currentTime=0)};return s(()=>{o()}),{bgMusic:a,clickSound:t,initAudio:()=>{a.value&&(a.value.volume=1),t.value&&(t.value.volume=1,t.value.load())},playBackgroundMusic:async()=>{if(a.value)try{a.value.volume=1,await a.value.play()}catch(e){}},playClickSound:async()=>{if(t.value)try{t.value.currentTime=0,await t.value.play()}catch(e){}},cleanup:o}}const R={class:"menu-content"},D={class:"menu-buttons"},E=["disabled"],W=["disabled"],$=C({__name:"GameMenu",props:{showCinematics:{type:Boolean,required:!0},menuButtonsReady:{type:Boolean,required:!0},isTransitioningToCinematics:{type:Boolean,required:!0}},emits:["start-cinematics","show-credits"],setup(e,{emit:a}){const s=a,{playClickSound:o}=L(),d=async e=>{await o(),s(e)};return(a,s)=>r((i(),t("div",{class:m(["menu-container",{"fade-to-black":e.isTransitioningToCinematics}])},[l("div",R,[s[2]||(s[2]=l("h1",{class:"pixel-title"},[n("The"),l("br"),l("span",{class:"fading-text"},"Fading"),l("br"),n("Crown")],-1)),l("div",D,[l("button",{class:"pixel-button",onClick:s[0]||(s[0]=e=>d("start-cinematics")),disabled:!e.menuButtonsReady}," Start Game ",8,E),l("button",{class:"pixel-button",onClick:s[1]||(s[1]=e=>d("show-credits")),disabled:!e.menuButtonsReady}," Credits ",8,W)])])],2)),[[c,!e.showCinematics]])}},[["__scopeId","data-v-794e3e5f"]]),z={class:"game-cinematics"},N=["onAnimationend"],O=.015,j=350,V=C({__name:"GameCinematics",emits:["fade-complete"],setup(s,{emit:o}){const r=o,c=[{text:"The royal bloodline has faded into legend"},{text:"Political schemes have bled the kingdom dry"},{text:"Noble houses squabble over ruins"},{text:"While common folk pray to silent gods"},{text:"Bandits have overrun the Royal Guard"},{text:"Chaos threatens the realm..."}],f=[{text:"Yet hope remains!"},{text:"Rumors of a rightful heir"},{text:"Have emerged from the East"},{text:"Steward Varric, keeper of Ryn's throne"},{text:"Sent me on a secret mission to restore"}],y=e([]),b=e(!1),w=e(!1),k=e(!1),_=e(!1),C=e([]);let B=0;const T=e(new Set),M=e(new Map),x=e=>e.map((a,s)=>{const t=3+e.slice(0,s).reduce((e,a)=>e+a.text.length*O+1.2,0),o=a.text.length*O;return{...a,startDelay:t,messageDuration:o,messageId:`${Date.now()}-${s}`}});y.value=x([{text:"Ryn was once a powerful and thriving land"},{text:"Its banners flew proudly from golden spires"},{text:"Scholars, kings, and saints walked the same halls"},{text:"Its prosperity matched only by the wisdom of its people"},{text:"Alas, those days are long gone..."}]),a(()=>{for(let e=0;e<5;e++){const e=new Audio("/assets/sound/typing.mp3");e.volume=.35,e.preload="auto",e.load(),C.value.push(e)}A()});const S=e=>{const a=M.value.get(e);a&&(a.loop=!1,a.pause(),a.currentTime=0,M.value.delete(e))},A=()=>{y.value.forEach(e=>{setTimeout(()=>{((e,a)=>{if(!T.value.has(e)&&(T.value.add(e),C.value.length>0)){const s=C.value[B];s.currentTime=0,s.loop=!0;const t=s.play();void 0!==t&&t.then(()=>{M.value.set(e,s),setTimeout(()=>{S(e)},1e3*a)}).catch(()=>{s.load()}),B=(B+1)%5}})(e.messageId,e.messageDuration)},1e3*e.startDelay)})};v(y,e=>{e.length>0&&(M.value.forEach((e,a)=>{S(a)}),T.value.clear(),h(()=>{_.value||A()}))},{deep:!0});return(e,a)=>(i(),t("div",z,[l("div",{class:m(["cinematics-container",{"fade-out":b.value}])},[_.value?(i(),t(g,{key:1},[a[0]||(a[0]=l("div",{class:"title"},[n("The "),l("span",{class:"fading-text"},"Fading"),n(" Crown")],-1)),a[1]||(a[1]=l("div",{class:"coming-soon"},"Coming Soon",-1))],64)):(i(!0),t(g,{key:0},p(y.value,(e,a)=>(i(),t("div",{key:a,class:"cinematics-message",style:d({animationDelay:`${e.startDelay}s`})},[(i(!0),t(g,null,p(e.text,(s,o)=>(i(),t("span",{class:"letter",key:o,style:d({animationDelay:`${e.startDelay+o*O}s`}),onAnimationend:e=>((e,a,s,t)=>{e===y.value.length-1&&a===t-1&&s===y.value[e].text.length-1&&(w.value?k.value?_.value?setTimeout(()=>{b.value=!0,setTimeout(()=>{r("fade-complete")},j)},1e3):setTimeout(()=>{b.value=!0,r("fade-complete"),setTimeout(()=>{b.value=!1,_.value=!0},j)},1e3):setTimeout(()=>{b.value=!0,r("fade-complete"),setTimeout(()=>{b.value=!1,k.value=!0,y.value=[],h(()=>{y.value=x(f)})},j)},1e3):setTimeout(()=>{b.value=!0,r("fade-complete"),setTimeout(()=>{b.value=!1,w.value=!0,y.value=[],h(()=>{y.value=x(c)})},j)},1e3))})(a,0,o,1)},u(" "===s?" ":s),45,N))),128))],4))),128))],2)]))}},[["__scopeId","data-v-dd416e0b"]]),K=C({__name:"CreditsModal",props:{isVisible:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:a}){const s=a,n=async()=>{await(async()=>{const e=new Audio("/assets/sound/button-press.wav");e.volume=1;try{await e.play()}catch(a){}})(),s("close")};return(a,s)=>e.isVisible?(i(),t("div",{key:0,class:"credits-modal-overlay",onClick:y(n,["self"])},[l("div",{class:"credits-modal"},[l("button",{class:"close-button",onClick:n},"×"),s[0]||(s[0]=f('<div class="credits-content" data-v-22ffab1d><h2 class="credits-title" data-v-22ffab1d>Credits</h2><div class="credits-section" data-v-22ffab1d><h3 data-v-22ffab1d>Artwork</h3><p data-v-22ffab1d>Fatih Emir</p><p data-v-22ffab1d>Kryssalian</p><p data-v-22ffab1d>Vertibirdo</p><p data-v-22ffab1d>v78</p></div><div class="credits-section" data-v-22ffab1d><h3 data-v-22ffab1d>Music</h3><p data-v-22ffab1d>World of Warcraft</p><h3 data-v-22ffab1d>Everything Else</h3><p data-v-22ffab1d>Karl Querel</p></div></div>',1))])])):o("",!0)}},[["__scopeId","data-v-22ffab1d"]]);const H=C({__name:"GameBackground",props:{showCinematics:{type:Boolean,default:!1},shouldMoveBackground:{type:Boolean,default:!1},showThirdMessageBlock:{type:Boolean,default:!1},showFourthMessageBlock:{type:Boolean,default:!1},isInitialLoad:{type:Boolean,default:!0},showGame:{type:Boolean,default:!1},isFirstSequence:{type:Boolean,default:!0},isTransitioningToCinematics:{type:Boolean,default:!1}},setup:e=>(a,s)=>(i(),t("div",{class:m(["game-background",{"fade-to-black":e.isTransitioningToCinematics,"first-message-block":e.showCinematics&&!e.shouldMoveBackground&&e.isFirstSequence,"second-message-block":e.shouldMoveBackground&&!e.showThirdMessageBlock,"third-message-block":e.showThirdMessageBlock&&!e.showFourthMessageBlock,"fourth-message-block":e.showFourthMessageBlock,"initial-load":e.isInitialLoad,"show-game":e.showGame}])},s[0]||(s[0]=[l("div",{class:"background-overlay"},null,-1)]),2))},[["__scopeId","data-v-9311dd7d"]]),Q={key:0,style:{overflow:"hidden",height:"100vh"}},Y={class:"game-content"},J=C({__name:"Game",setup(s){const n=e(!1),d=e(null),u=e(null),{bgMusic:r,clickSound:c,initAudio:m,playBackgroundMusic:p,playClickSound:h}=L(),{showGame:f,showCinematics:y,shouldMoveBackground:C,showThirdMessageBlock:B,showFourthMessageBlock:M,isInitialLoad:x,menuButtonsReady:S,isFirstSequence:A,isTransitioningToCinematics:P,startGame:I,launchCinematics:q,onFadeComplete:R,initializeMenu:D}=function(){const a=e(!1),s=e(!1),t=e(!1),o=e(!1),i=e(!1),l=e(!0),n=e(!1),d=e(!0),u=e(!1);return v(a,e=>{document.body.style.overflow=e?"hidden":""}),{showGame:a,showCinematics:s,shouldMoveBackground:t,showThirdMessageBlock:o,showFourthMessageBlock:i,isInitialLoad:l,menuButtonsReady:n,isFirstSequence:d,isTransitioningToCinematics:u,startGame:()=>{a.value=!0},launchCinematics:async e=>{await e(),u.value=!0,setTimeout(()=>{s.value=!0,d.value=!0,u.value=!1},2e3)},onFadeComplete:()=>{s.value&&!t.value&&d.value?(d.value=!1,t.value=!0):s.value&&t.value&&!o.value?o.value=!0:s.value&&o.value&&!i.value?i.value=!0:s.value&&i.value&&(s.value=!1,t.value=!1,o.value=!1,i.value=!1,d.value=!0,a.value=!0)},initializeMenu:()=>{setTimeout(()=>{l.value=!1,n.value=!0},12e3)}}}(),{isLoading:E,loadingProgress:W,totalAssets:z,loadedAssets:N,preloadAssets:O,isPreloadingComplete:j}=function(){const a=e(!0),s=e(0),t=e(0),o=e(0),i=["/assets/game/menu-background.gif","/assets/game/tavern.gif","/assets/game/menu.png"],l=["/assets/game/hole.gif","/assets/game/dead.gif","/assets/game/credits.gif","/assets/game/castle.gif"],n=["/assets/game/landscape/city-looped.gif","/assets/game/landscape/ruins.gif","/assets/game/landscape/city.gif","/assets/game/landscape/water.gif","/assets/game/landscape/sunset3.gif","/assets/game/landscape/sunset2.gif","/assets/game/landscape/sunset1.gif","/assets/game/landscape/smoke.gif","/assets/game/landscape/mountains1.gif","/assets/game/landscape/forest1.gif","/assets/game/landscape/snowy-mountains.gif","/assets/game/landscape/mountains2.gif","/assets/game/landscape/forest.gif","/assets/game/landscape/fields.gif"],d=e=>new Promise(a=>{const i=new Image;i.onload=()=>{o.value++,s.value=Math.round(o.value/t.value*100),a(e)},i.onerror=()=>{o.value++,s.value=Math.round(o.value/t.value*100),a(e)},i.src=e});return{isLoading:a,loadingProgress:s,totalAssets:t,loadedAssets:o,preloadAssets:async()=>{a.value=!0,s.value=0,t.value=i.length+l.length,o.value=0;try{await Promise.all(i.map(d)),await Promise.all(l.map(d))}catch(e){}finally{a.value=!1}},loadLandscapeAssets:async()=>{await Promise.all(n.map(d))},getLoadingPercentage:()=>s.value,isPreloadingComplete:()=>!a.value&&o.value===t.value}}(),J=async()=>{I(),await p()},U=async()=>{await q(h)},X=async()=>{await h(),n.value=!0};a(async()=>{await O(),j()&&(m(),D())});const Z=b(()=>{var e;return(null==(e=u.value)?void 0:e.isMobile)??!1});return(e,a)=>(i(),t(g,null,[l("div",null,[w(T,{ref_key:"mobileWarningRef",ref:u},null,512),Z.value?o("",!0):(i(),t(g,{key:0},[w(F,{"is-loading":k(E),"loading-progress":k(W),"loaded-assets":k(N),"total-assets":k(z)},null,8,["is-loading","loading-progress","loaded-assets","total-assets"]),k(E)?o("",!0):(i(),t("div",Q,[k(f)?(i(),t("div",{key:1,class:"game-container",ref_key:"gameContainer",ref:d},[w(H,{"show-cinematics":k(y),"should-move-background":k(C),"show-third-message-block":k(B),"show-fourth-message-block":k(M),"is-initial-load":k(x),"show-game":k(f),"is-first-sequence":k(A),"is-transitioning-to-cinematics":k(P)},null,8,["show-cinematics","should-move-background","show-third-message-block","show-fourth-message-block","is-initial-load","show-game","is-first-sequence","is-transitioning-to-cinematics"]),l("div",Y,[w($,{"show-cinematics":k(y),"menu-buttons-ready":k(S),"is-transitioning-to-cinematics":k(P),onStartCinematics:U,onShowCredits:X},null,8,["show-cinematics","menu-buttons-ready","is-transitioning-to-cinematics"]),k(y)?(i(),_(V,{key:0,onFadeComplete:k(R)},null,8,["onFadeComplete"])):o("",!0),w(K,{"is-visible":n.value,onClose:a[0]||(a[0]=e=>n.value=!1)},null,8,["is-visible"])])],512)):(i(),_(G,{key:0,"show-game":k(f),onStartGame:J},null,8,["show-game"]))]))],64))]),l("audio",{ref_key:"bgMusic",ref:r,loop:""},a[1]||(a[1]=[l("source",{src:"/assets/music/menu-wow.mp3",type:"audio/mpeg"},null,-1)]),512),l("audio",{ref_key:"clickSound",ref:c},a[2]||(a[2]=[l("source",{src:"/assets/sound/button-press.wav",type:"audio/mpeg"},null,-1)]),512)],64))}},[["__scopeId","data-v-00b10e58"]]),U=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{U as G,C as _};
