import{r as e,o as a,a as s,c as t,b as n,d as i,e as o,f as l,n as c,t as u,w as r,v as d,g as m,i as v,h as p,j as g,k as h,u as y,l as f,m as w,p as b,F as C,q as k}from"./vendor-DyNL8VlX.js";const _=(e,a)=>{const s=e.__vccOpts||e;for(const[t,n]of a)s[t]=n;return s},S={key:0,class:"mobile-message"},T=_({__name:"MobileWarning",setup(c){const u=e(!1),r=()=>{u.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768};return a(()=>{r(),window.addEventListener("resize",r)}),s(()=>{window.removeEventListener("resize",r)}),(e,a)=>u.value?(i(),t("div",S,a[0]||(a[0]=[o("div",{class:"mobile-content"},[o("h2",null,"Not available on mobile devices"),o("p",null,[l(" Please use a "),o("span",{class:"highlight"},"desktop computer"),l(" for the best experience ")])],-1)]))):n("",!0)}},[["__scopeId","data-v-00e963b1"]]),q={key:0,class:"loading-screen"},A={class:"loading-content"},B={class:"loading-bar-container"},P={class:"loading-text"},M={class:"loading-details"},G=_({__name:"LoadingScreen",props:{isLoading:{type:Boolean,required:!0},loadingProgress:{type:Number,required:!0},loadedAssets:{type:Number,required:!0},totalAssets:{type:Number,required:!0}},setup:e=>(a,s)=>e.isLoading?(i(),t("div",q,[o("div",A,[s[0]||(s[0]=o("h2",{class:"loading-title"},"Loading Assets",-1)),o("div",B,[o("div",{class:"loading-bar",style:c({width:`${e.loadingProgress}%`})},null,4)]),o("div",P,u(e.loadingProgress)+"% Complete",1),o("div",M,u(e.loadedAssets)+" / "+u(e.totalAssets)+" assets loaded",1)])])):n("",!0)},[["__scopeId","data-v-e399ca91"]]),I={key:0,class:"pre-game-screen"},L={class:"pre-game-content"},E=_({__name:"PreGameScreen",props:{showGame:{type:Boolean,required:!0}},emits:["start-game"],setup:e=>(a,s)=>e.showGame?n("",!0):(i(),t("div",I,[o("div",L,[s[1]||(s[1]=o("h2",{class:"pre-game-title"},[l(" This game is currently"),o("br"),o("span",{class:"highlight"},"in development")],-1)),s[2]||(s[2]=o("h2",{class:"pre-game-title"},[l(" For the best experience"),o("br"),l("turn on your "),o("span",{class:"highlight"},"sound"),l(" before starting ")],-1)),o("button",{class:"pixel-button",onClick:s[0]||(s[0]=e=>a.$emit("start-game"))},"Sound is on!")])]))},[["__scopeId","data-v-dcf6c169"]]);function x(){const a=e(null),t=e(null),n=()=>{a.value&&(a.value.pause(),a.value.currentTime=0),t.value&&(t.value.pause(),t.value.currentTime=0)};return s(()=>{n()}),{bgMusic:a,clickSound:t,initAudio:()=>{a.value&&(a.value.volume=1),t.value&&(t.value.volume=1,t.value.load())},playBackgroundMusic:async()=>{if(a.value)try{a.value.volume=1,await a.value.play()}catch(e){}},playClickSound:async()=>{if(t.value)try{t.value.currentTime=0,await t.value.play()}catch(e){}},cleanup:n}}const F={class:"menu-content"},R={class:"menu-buttons"},O=["disabled"],N=["disabled"],V=_({__name:"GameMenu",props:{showCinematics:{type:Boolean,required:!0},menuButtonsReady:{type:Boolean,required:!0},isTransitioningToCinematics:{type:Boolean,required:!0}},emits:["start-cinematics","show-credits"],setup(e,{emit:a}){const s=a,{playClickSound:n}=x();v("footerVisibility",{toggleFooter:()=>{}});const c=async e=>{await n(),"start-cinematics"===e&&window.dispatchEvent(new CustomEvent("hide-navbar")),s(e)};return(a,s)=>r((i(),t("div",{class:m(["menu-container",{"fade-to-black":e.isTransitioningToCinematics}])},[o("div",F,[s[2]||(s[2]=o("h1",{class:"pixel-title"},[l("The"),o("br"),o("span",{class:"fading-text"},"Fading"),o("br"),l("Crown")],-1)),o("div",R,[o("button",{class:"pixel-button",onClick:s[0]||(s[0]=e=>c("start-cinematics")),disabled:!e.menuButtonsReady}," Start Game ",8,O),o("button",{class:"pixel-button",onClick:s[1]||(s[1]=e=>c("show-credits")),disabled:!e.menuButtonsReady}," Credits ",8,N)])])],2)),[[d,!e.showCinematics]])}},[["__scopeId","data-v-422b8ae1"]]),W={first:["Ryn was once a powerful and thriving land","Its banners flew proudly from golden spires","Scholars, kings, and saints walked the same halls","Its prosperity matched only by the wisdom of its people","Alas, those days are long gone..."],second:["The royal bloodline has faded into legend","Political schemes have bled the kingdom dry","Noble houses squabble over ruins","While common folk pray to silent gods","Bandits have overrun the Royal Guard","Chaos threatens the realm..."],third:["Yet hope remains!","Rumors of a rightful heir","Have emerged from the East","Steward Varric, keeper of Ryn's throne","Sent me on a secret mission to restore"]},z=1,j=350;function D(){const a=e(0),s=e(!1),t=e(!1),n=e([]),i=[W.first,W.second,W.third,null],o={speed:30,startDelay:0,deleteSpeed:0,breakLines:!1},l=p(()=>{const e=i[a.value];return e||[]}),c=p(()=>a.value===i.length-1),u=p(()=>3===a.value),r=()=>!c.value&&(s.value=!1,a.value++,!0);return{currentSequence:a,shouldFadeOut:s,showContinueButton:t,currentMessages:l,isLastSequence:c,isFourthSequence:u,startSequence:async(e,a,i)=>{if(!e||0===e.length)return;const c=e[0];c&&await((e,a,s,t)=>new Promise(i=>{g(()=>{if(e&&window.TypeIt){e.innerHTML="",n.value=[];const l=1e3,c=new window.TypeIt(e,{strings:a,...o,lifelike:!0,html:!0,cursor:!1,deleteSpeed:0,breakLines:!0,nextStringDelay:l,waitUntilVisible:!0,afterComplete:function(e){i()}}).go();if(n.value.push(c),s&&t){let e=0;a.forEach((a,n)=>{const i=33*a.length;setTimeout(()=>{t(),s(i)},e),e+=i+l})}}else i()})}))(c,l.value,a,i),await new Promise(e=>setTimeout(e,2e3)),s.value=!0,setTimeout(()=>{r()||setTimeout(()=>{t.value=!0},1e3*z)},j)},nextSequence:r,reset:()=>{a.value=0,s.value=!1,t.value=!1,n.value.forEach(e=>{e&&"function"==typeof e.destroy&&e.destroy()}),n.value=[]},typewriterSpeed:o}}const H={class:"game-cinematics"},K={key:1,class:"title-screen"},$=_({__name:"GameCinematics",emits:["fade-complete","cinematics-complete","advance-sequence"],setup(s,{emit:c}){const u=c,r=e(null),{currentSequence:d,shouldFadeOut:v,showContinueButton:p,currentMessages:f,isFourthSequence:w,startSequence:b}=D(),{initAudioPool:C,playTypingSound:k,stopAllAudio:_}=function(){const a=e([]);let s=0;return{initAudioPool:()=>{for(let e=0;e<3;e++){const e=new Audio("/assets/sound/typing.mp3");e.volume=.35,e.preload="auto",a.value.push(e)}},playTypingSound:e=>{if(0===a.value.length)return;const t=a.value[s];t.currentTime=0,t.loop=!0;const n=t.play();void 0!==n&&n.then(()=>{setTimeout(()=>{t.loop=!1,t.pause(),t.currentTime=0},e)}).catch(()=>{t.load()}),s=(s+1)%3},stopAllAudio:()=>{a.value.forEach(e=>{e.pause(),e.currentTime=0,e.loop=!1})},cleanup:()=>{a.value.forEach(e=>{e.pause(),e.currentTime=0})}}}();return a(()=>{C(),g(()=>{r.value&&b([r.value],k,_)})}),h(d,e=>{e>0&&(u("advance-sequence"),setTimeout(()=>{g(()=>{r.value&&b([r.value],k,_)})},500))}),h(p,e=>{e&&u("cinematics-complete")}),(e,a)=>(i(),t("div",H,[o("div",{class:m(["cinematics-container",{"fade-out":y(v)}])},[y(w)?n("",!0):(i(),t("div",{key:0,class:"cinematics-message",ref_key:"messageContainer",ref:r},null,512)),y(w)?(i(),t("div",K,a[0]||(a[0]=[o("div",{class:"title"},[l("The "),o("span",{class:"fading-text"},"Fading"),l(" Crown")],-1),o("div",{class:"continue-section"},[o("div",{class:"coming-soon"},"Coming Soon")],-1)]))):n("",!0)],2)]))}},[["__scopeId","data-v-1fc67380"]]),Q=_({__name:"CreditsModal",props:{isVisible:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:a}){const s=a,l=async()=>{await(async()=>{const e=new Audio("/assets/sound/button-press.wav");e.volume=1;try{await e.play()}catch(a){}})(),s("close")};return(a,s)=>e.isVisible?(i(),t("div",{key:0,class:"credits-modal-overlay",onClick:w(l,["self"])},[o("div",{class:"credits-modal"},[o("button",{class:"close-button",onClick:l},"Ã—"),s[0]||(s[0]=f('<div class="credits-content" data-v-3ecf8598><h2 class="credits-title" data-v-3ecf8598>Credits</h2><div class="credits-section" data-v-3ecf8598><h3 data-v-3ecf8598>Artwork</h3><p data-v-3ecf8598>Fatih Emir</p><p data-v-3ecf8598>Kryssalian</p><p data-v-3ecf8598>Vertibirdo</p><p data-v-3ecf8598>v78</p></div><div class="credits-section" data-v-3ecf8598><h3 data-v-3ecf8598>Music</h3><p data-v-3ecf8598>World of Warcraft</p><h3 data-v-3ecf8598>Everything Else</h3><p data-v-3ecf8598>Karl Querel</p></div></div>',1))])])):n("",!0)}},[["__scopeId","data-v-3ecf8598"]]);const U=_({__name:"GameBackground",props:{showCinematics:{type:Boolean,default:!1},isInitialLoad:{type:Boolean,default:!0},showGame:{type:Boolean,default:!1},isTransitioningToCinematics:{type:Boolean,default:!1},currentSequence:{type:Number,default:0}},setup:e=>(a,s)=>(i(),t("div",{class:m(["game-background",{"initial-load":e.isInitialLoad,"show-game":e.showGame,"fade-to-black":e.isTransitioningToCinematics,"sequence-0":e.showCinematics&&0===e.currentSequence,"sequence-1":e.showCinematics&&1===e.currentSequence,"sequence-2":e.showCinematics&&2===e.currentSequence,"sequence-3":e.showCinematics&&3===e.currentSequence}])},s[0]||(s[0]=[o("div",{class:"background-overlay"},null,-1)]),2))},[["__scopeId","data-v-ec52a417"]]),Y={key:0,style:{overflow:"hidden",height:"100vh"}},J={class:"game-content"},X=_({__name:"Game",setup(s){const l=e(!1),c=e(null),u=e(null),{bgMusic:r,clickSound:d,initAudio:m,playBackgroundMusic:v,playClickSound:g}=x(),{showGame:f,showCinematics:w,isInitialLoad:_,menuButtonsReady:S,cinematicsComplete:q,isTransitioningToCinematics:A,startGame:B,launchCinematics:P,onCinematicsComplete:M,continueToGame:I,initializeMenu:L}=function(){const a=e(!1),s=e(!1),t=e(!0),n=e(!1),i=e(!1),o=e(!1);return h(a,e=>{document.body.style.overflow=e?"hidden":""}),{showGame:a,showCinematics:s,isInitialLoad:t,menuButtonsReady:n,cinematicsComplete:i,isTransitioningToCinematics:o,startGame:()=>{a.value=!0},launchCinematics:async e=>{await e(),o.value=!0,setTimeout(()=>{s.value=!0,o.value=!1},2e3)},onCinematicsComplete:()=>{i.value=!0},continueToGame:()=>{s.value=!1,i.value=!1,a.value=!0},initializeMenu:()=>{setTimeout(()=>{t.value=!1,n.value=!0},12e3)}}}(),F=e(0),{isLoading:R,loadingProgress:O,totalAssets:N,loadedAssets:W,preloadAssets:z,isPreloadingComplete:j}=function(){const a=e(!0),s=e(0),t=e(0),n=e(0),i=["/assets/game/menu-background.gif","/assets/game/tavern.gif","/assets/game/menu.png"],o=["/assets/game/hole.gif","/assets/game/dead.gif","/assets/game/credits.gif","/assets/game/castle.gif"],l=e=>new Promise(a=>{const i=new Image;i.onload=()=>{n.value++,s.value=Math.round(n.value/t.value*100),a(e)},i.onerror=()=>{n.value++,s.value=Math.round(n.value/t.value*100),a(e)},i.src=e});return{isLoading:a,loadingProgress:s,totalAssets:t,loadedAssets:n,preloadAssets:async()=>{a.value=!0,s.value=0,t.value=i.length+o.length,n.value=0;try{await Promise.all(i.map(l)),await Promise.all(o.map(l))}catch(e){}finally{a.value=!1}},getLoadingPercentage:()=>s.value,isPreloadingComplete:()=>!a.value&&n.value===t.value}}(),D=async()=>{B(),await v()},H=async()=>{await P(g)},K=async()=>{await g(),l.value=!0},X=()=>{q.value&&I()};a(async()=>{await z(),j()&&(m(),L())});const Z=p(()=>{var e;return(null==(e=u.value)?void 0:e.isMobile)??!1});return(e,a)=>(i(),t(C,null,[o("div",null,[b(T,{ref_key:"mobileWarningRef",ref:u},null,512),Z.value?n("",!0):(i(),t(C,{key:0},[b(G,{"is-loading":y(R),"loading-progress":y(O),"loaded-assets":y(W),"total-assets":y(N)},null,8,["is-loading","loading-progress","loaded-assets","total-assets"]),y(R)?n("",!0):(i(),t("div",Y,[y(f)?(i(),t("div",{key:1,class:"game-container",ref_key:"gameContainer",ref:c},[b(U,{"show-cinematics":y(w),"is-initial-load":y(_),"show-game":y(f),"current-sequence":F.value,"is-transitioning-to-cinematics":y(A)},null,8,["show-cinematics","is-initial-load","show-game","current-sequence","is-transitioning-to-cinematics"]),o("div",J,[b(V,{"show-cinematics":y(w),"menu-buttons-ready":y(S),"is-transitioning-to-cinematics":y(A),onStartCinematics:H,onShowCredits:K},null,8,["show-cinematics","menu-buttons-ready","is-transitioning-to-cinematics"]),y(w)?(i(),k($,{key:0,onFadeComplete:X,onCinematicsComplete:y(M),onAdvanceSequence:a[0]||(a[0]=e=>F.value++)},null,8,["onCinematicsComplete"])):n("",!0),b(Q,{"is-visible":l.value,onClose:a[1]||(a[1]=e=>l.value=!1)},null,8,["is-visible"])])],512)):(i(),k(E,{key:0,"show-game":y(f),onStartGame:D},null,8,["show-game"]))]))],64))]),o("audio",{ref_key:"bgMusic",ref:r,loop:""},a[2]||(a[2]=[o("source",{src:"/assets/music/menu-wow.mp3",type:"audio/mpeg"},null,-1)]),512),o("audio",{ref_key:"clickSound",ref:d},a[3]||(a[3]=[o("source",{src:"/assets/sound/button-press.wav",type:"audio/mpeg"},null,-1)]),512)],64))}},[["__scopeId","data-v-1a644c8d"]]),Z=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{Z as G,_};
